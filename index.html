// Is hisse ko apne script mein update karein
document.getElementById('uploadInput').onchange = async (e) => {
    const file = e.target.files[0];
    if (!file) return;

    document.getElementById('msg').innerText = "Uploading... Please wait ⏳";
    document.getElementById('msg').style.color = "blue";

    const formData = new FormData();
    formData.append('file', file);
    formData.append('upload_preset', MY_PRESET);

    try {
        const res = await fetch(`https://api.cloudinary.com/v1_1/${MY_CLOUD}/image/upload`, {
            method: 'POST', body: formData
        });
        const data = await res.json();

        // Agar upload sahi hua toh hi Success dikhayega
        if (data.secure_url) {
            mainUrl = data.secure_url;
            document.getElementById('msg').innerText = "✅ Photo Upload Ho Gayi! Ab Magic Button dabayein.";
            document.getElementById('msg').style.color = "green";
        } else {
            // Agar Cloudinary error de raha hai
            console.error("Cloudinary Error:", data);
            document.getElementById('msg').innerText = "❌ Error: " + (data.error ? data.error.message : "Upload fail ho gaya");
            document.getElementById('msg').style.color = "red";
        }
    } catch (err) {
        document.getElementById('msg').innerText = "❌ Connection Error! Check internet ya Cloud Name.";
        document.getElementById('msg').style.color = "red";
    }
};
